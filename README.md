# Веб-приложение для мониторинга и загрузки конфигурации на NodeJS

## Установка
https://github.com/ildarka/flanker_control/archive/master.zip

## Установка NodeJS
Под Windows нужно установить NodeJS, в папке /distrib находятся 32-х и 64-х разрядные версии

## Установка PM2
Зайти в папку с приложением в консоли и набрать 
```
npm install
```

## Запуск и остановка приложения
+ Для запуска в консоли и набрать 
```
npm start
```
+ Для остановки в консоли и набрать 
```
npm stop
```

В Windows надо добавить команду запуска приложения в скрипт автозагрузки.

## Мониторинг приложения
Приложение можно контролировать через pm2. 
Более подробно о pm2 по ссылке https://www.npmjs.com/package/pm2

## Работа с приложением
После запуска приложение будет доступно в Windows по адресу:
```
http://localhost
``` 
в Linux по адресу: 
```
http://localhost:3000
``` 
+ Авторизация: admin 0000
+ Все настройки в server.js

## Структура папок и файлов
+ configs/ — загруженные конфигурации
+ distrib/ — зависимости для Windows
+ node_modules/ — npm-модули
+ public/ — клиентская часть приложения
+ tmp/ — папка для временного хранения конфигураций
+ mock.sh — скрипт для тестирования под Linux
+ package.json — служебный файл
+ reboot.bat — скрипт перезапуска ОС (написать)
+ server.js — серверная часть приложения
+ server.log — лог действий пользователя
+ state.dnt — состояние входов/выходов (написать скрипт)

## Файл с состоянием устройства
Состояние устройства должно сохраняться в файл state.dnt. Состояния кодируюся нулями и единицами разделенными пробелом.
Включен — 1, выключен — 0. Первые четыре цифры — Входы, пятая — устройство, шестая — выход E1.
Пример состояния:
```
1 1 1 1 1 0
```
